<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>mingo</title><meta name="description" content="Documentation for mingo"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">mingo</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> mingo</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#mingo" id="mingo" style="color: inherit; text-decoration: none;">
  <h1>mingo</h1>
</a>
<p>MongoDB query language for in-memory objects</p>
<p><img src="https://img.shields.io/github/license/kofrasa/mingo" alt="license">
<a href="https://www.npmjs.org/package/mingo"><img src="https://img.shields.io/npm/v/mingo" alt="version"></a>
<a href="https://github.com/kofrasa/mingo/actions/workflows/node.js.yml"><img src="https://github.com/kofrasa/mingo/actions/workflows/node.js.yml/badge.svg" alt="build"></a>
<img src="https://img.shields.io/github/issues/kofrasa/mingo" alt="issues">
<a href="https://codecov.io/gh/kofrasa/mingo"><img src="https://img.shields.io/codecov/c/github/kofrasa/mingo" alt="codecov"></a>
<a href="https://lgtm.com/projects/g/kofrasa/mingo/context:javascript"><img src="https://img.shields.io/lgtm/grade/javascript/github/kofrasa/mingo" alt="quality: Javascript"></a>
<a href="https://lgtm.com/projects/g/kofrasa/mingo/alerts"><img src="https://img.shields.io/lgtm/alerts/github/kofrasa/mingo" alt="alerts"></a>
<a href="https://www.npmjs.org/package/mingo"><img src="https://img.shields.io/npm/dm/mingo" alt="npm downloads"></a></p>

<a href="#install" id="install" style="color: inherit; text-decoration: none;">
  <h2>Install</h2>
</a>
<p><code>$ npm install mingo</code></p>

<a href="#features" id="features" style="color: inherit; text-decoration: none;">
  <h2>Features</h2>
</a>
<ul>
<li>Supports dot notation for both <em><code>&lt;array&gt;.&lt;index&gt;</code></em> and <em><code>&lt;document&gt;.&lt;field&gt;</code></em> selectors</li>
<li>Query and Projection Operators<ul>
<li><a href="https://docs.mongodb.com/manual/reference/operator/query-array/">Array Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/query-bitwise/">Bitwise Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/query-comparison/">Comparisons Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/query-element/">Element Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/query-evaluation/">Evaluation Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/query-logical/">Logical Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/projection/">Projection Operators</a></li>
</ul>
</li>
<li>Aggregation Framework Operators<ul>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation-pipeline/">Pipeline Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation#accumulators-group/">Accumulator Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#expression-operators">Expression Operators</a><ul>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#arithmetic-expression-operators">Arithmetic Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#array-expression-operators/">Array Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#boolean-expression-operators/">Boolean Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#comparison-expression-operators/">Comparisons Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#conditional-expression-operators/">Conditional Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#custom-aggregation-expression-operators">Custom Aggregation Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#date-expression-operators/">Date Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#literal-expression-operators/">Literal Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#miscellaneous-operators">Miscellaneous Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#object-expression-operators">Object Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#set-expression-operators/">Set Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#string-expression-operators">String Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#trigonometry-expression-operators">Trignometry Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#type-expression-operators">Type Operators</a></li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/#variable-expression-operators">Variable Operators</a></li>
</ul>
</li>
<li><a href="https://docs.mongodb.com/manual/reference/operator/aggregation/setWindowFields/#window-operators">Window Operators</a></li>
</ul>
</li>
<li>Supports aggregaion variables; <a href="https://docs.mongodb.com/manual/reference/aggregation-variables/"><code>$$ROOT</code>, <code>$$CURRENT</code>, <code>$$DESCEND</code>, <code>$$PRUNE</code>, <code>$$KEEP</code>, <code>$$REMOVE</code>, <code>$$NOW</code></a></li>
<li>Filtering and aggregation using streaming.</li>
</ul>
<p>For documentation on using query operators see <a href="http://docs.mongodb.org/manual/reference/operator/query/">mongodb</a></p>
<p>Browse <a href="http://kofrasa.net/mingo/">package docs</a> for modules.</p>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h2>Usage</h2>
</a>
<pre><code class="language-js"><span class="hl-0">// Use as es6 module</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-3">mingo</span><span class="hl-2"> </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// or vanilla nodeJS</span><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">mingo</span><span class="hl-2"> = </span><span class="hl-7">require</span><span class="hl-2">(</span><span class="hl-4">&quot;mingo&quot;</span><span class="hl-2">);</span>
</code></pre>
<p>The main module exports <code>Aggregator</code>, <code>Query</code>, <code>aggregate()</code>, <code>find()</code>, and <code>remove()</code>. Only <a href="https://docs.mongodb.com/manual/reference/operator/query/">Query and Projection</a> operators are loaded by default when you require the main module. This is done using the side-effect module <code>mingo/init/basic</code> and automatically includes pipeline operators; <code>$project</code>, <code>$skip</code>, <code>$limit</code>, and <code>$sort</code>.</p>

<a href="#loading-operators" id="loading-operators" style="color: inherit; text-decoration: none;">
  <h2>Loading Operators</h2>
</a>
<p>MongoDB query library is huge and you may not need all the operators. If using this library on the server-side where bundle size is not a concern, you can load all operators as shown below.</p>
<pre><code class="language-js"><span class="hl-0">// Note that doing this effectively imports the entire library into your bundle and unused operators cannot be tree shaked</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo/init/system&quot;</span><span class="hl-2">;</span>
</code></pre>
<p>Or from the node CLI</p>
<pre><code class="language-sh"><span class="hl-2">node -r </span><span class="hl-4">&#39;mingo/init/system&#39;</span><span class="hl-2"> myscript.js</span>
</code></pre>
<p>To support tree-shaking for client side bundles, you can import and register specific operators that will be used in your application.</p>

<a href="#es6" id="es6" style="color: inherit; text-decoration: none;">
  <h3>ES6</h3>
</a>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useOperators</span><span class="hl-2">, </span><span class="hl-3">OperatorType</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo/core&quot;</span><span class="hl-2">;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">$trunc</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo/operators/expression/trunc&quot;</span><span class="hl-2">;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">$bucket</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo/operators/pipeline/bucket&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-7">useOperators</span><span class="hl-2">(</span><span class="hl-3">OperatorType</span><span class="hl-2">.</span><span class="hl-6">EXPRESSION</span><span class="hl-2">, { </span><span class="hl-3">$trunc</span><span class="hl-2"> });</span><br/><span class="hl-7">useOperators</span><span class="hl-2">(</span><span class="hl-3">OperatorType</span><span class="hl-2">.</span><span class="hl-6">PIPELINE</span><span class="hl-2">, { </span><span class="hl-3">$bucket</span><span class="hl-2"> });</span>
</code></pre>

<a href="#es5" id="es5" style="color: inherit; text-decoration: none;">
  <h3>ES5</h3>
</a>
<pre><code class="language-js"><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">core</span><span class="hl-2"> = </span><span class="hl-7">require</span><span class="hl-2">(</span><span class="hl-4">&quot;mingo/core&quot;</span><span class="hl-2">);</span><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">$trunc</span><span class="hl-2"> = </span><span class="hl-7">require</span><span class="hl-2">(</span><span class="hl-4">&quot;mingo/operators/expression/trunc&quot;</span><span class="hl-2">).</span><span class="hl-3">$trunc</span><span class="hl-2">;</span><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">$bucket</span><span class="hl-2"> = </span><span class="hl-7">require</span><span class="hl-2">(</span><span class="hl-4">&quot;mingo/operators/pipeline/bucket&quot;</span><span class="hl-2">).</span><span class="hl-3">$bucket</span><span class="hl-2">;</span><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">useOperators</span><span class="hl-2"> = </span><span class="hl-3">core</span><span class="hl-2">.</span><span class="hl-3">useOperators</span><span class="hl-2">;</span><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">OperatorType</span><span class="hl-2"> = </span><span class="hl-3">core</span><span class="hl-2">.</span><span class="hl-3">OperatorType</span><span class="hl-2">;</span><br/><br/><span class="hl-7">useOperators</span><span class="hl-2">(</span><span class="hl-3">OperatorType</span><span class="hl-2">.</span><span class="hl-6">EXPRESSION</span><span class="hl-2">, { </span><span class="hl-3">$trunc:</span><span class="hl-2"> </span><span class="hl-3">$trunc</span><span class="hl-2"> });</span><br/><span class="hl-7">useOperators</span><span class="hl-2">(</span><span class="hl-3">OperatorType</span><span class="hl-2">.</span><span class="hl-6">PIPELINE</span><span class="hl-2">, { </span><span class="hl-3">$bucket:</span><span class="hl-2"> </span><span class="hl-3">$bucket</span><span class="hl-2"> });</span>
</code></pre>

<a href="#using-query-to-test-objects" id="using-query-to-test-objects" style="color: inherit; text-decoration: none;">
  <h2>Using query to test objects</h2>
</a>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">Query</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// create a query with criteria</span><br/><span class="hl-0">// find all grades for homework with score &gt;= 50</span><br/><span class="hl-5">let</span><span class="hl-2"> </span><span class="hl-3">query</span><span class="hl-2"> = </span><span class="hl-5">new</span><span class="hl-2"> </span><span class="hl-7">Query</span><span class="hl-2">({</span><br/><span class="hl-2">  </span><span class="hl-3">type:</span><span class="hl-2"> </span><span class="hl-4">&quot;homework&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-3">score:</span><span class="hl-2"> { </span><span class="hl-3">$gte:</span><span class="hl-2"> </span><span class="hl-8">50</span><span class="hl-2"> },</span><br/><span class="hl-2">});</span><br/><br/><span class="hl-0">// test if an object matches query</span><br/><span class="hl-3">query</span><span class="hl-2">.</span><span class="hl-7">test</span><span class="hl-2">(</span><span class="hl-3">doc</span><span class="hl-2">);</span>
</code></pre>

<a href="#searching-and-filtering" id="searching-and-filtering" style="color: inherit; text-decoration: none;">
  <h2>Searching and Filtering</h2>
</a>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">Query</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// input is either an Array or any iterable source (i.e Object{next:Function}) including ES6 generators.</span><br/><span class="hl-5">let</span><span class="hl-2"> </span><span class="hl-3">criteria</span><span class="hl-2"> = { </span><span class="hl-3">score:</span><span class="hl-2"> { </span><span class="hl-3">$gt:</span><span class="hl-2"> </span><span class="hl-8">10</span><span class="hl-2"> } };</span><br/><br/><span class="hl-5">let</span><span class="hl-2"> </span><span class="hl-3">query</span><span class="hl-2"> = </span><span class="hl-5">new</span><span class="hl-2"> </span><span class="hl-7">Query</span><span class="hl-2">(</span><span class="hl-3">criteria</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// filter collection with find()</span><br/><span class="hl-5">let</span><span class="hl-2"> </span><span class="hl-3">cursor</span><span class="hl-2"> = </span><span class="hl-3">query</span><span class="hl-2">.</span><span class="hl-7">find</span><span class="hl-2">(</span><span class="hl-3">collection</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// alternatively use shorthand</span><br/><span class="hl-0">// cursor = mingo.find(collection, criteria)</span><br/><br/><span class="hl-0">// sort, skip and limit by chaining</span><br/><span class="hl-3">cursor</span><span class="hl-2">.</span><span class="hl-7">sort</span><span class="hl-2">({ </span><span class="hl-3">student_id:</span><span class="hl-2"> </span><span class="hl-8">1</span><span class="hl-2">, </span><span class="hl-3">score:</span><span class="hl-2"> -</span><span class="hl-8">1</span><span class="hl-2"> }).</span><span class="hl-7">skip</span><span class="hl-2">(</span><span class="hl-8">100</span><span class="hl-2">).</span><span class="hl-7">limit</span><span class="hl-2">(</span><span class="hl-8">100</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// count matches. exhausts cursor</span><br/><span class="hl-3">cursor</span><span class="hl-2">.</span><span class="hl-7">count</span><span class="hl-2">();</span><br/><br/><span class="hl-0">// classic cursor iterator (old school)</span><br/><span class="hl-1">while</span><span class="hl-2"> (</span><span class="hl-3">cursor</span><span class="hl-2">.</span><span class="hl-7">hasNext</span><span class="hl-2">()) {</span><br/><span class="hl-2">  </span><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-7">log</span><span class="hl-2">(</span><span class="hl-3">cursor</span><span class="hl-2">.</span><span class="hl-7">next</span><span class="hl-2">());</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-0">// ES6 iterators (new cool)</span><br/><span class="hl-1">for</span><span class="hl-2"> (</span><span class="hl-5">let</span><span class="hl-2"> </span><span class="hl-3">value</span><span class="hl-2"> </span><span class="hl-5">of</span><span class="hl-2"> </span><span class="hl-3">cursor</span><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-3">console</span><span class="hl-2">.</span><span class="hl-7">log</span><span class="hl-2">(</span><span class="hl-3">value</span><span class="hl-2">);</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-0">// all() to retrieve matched objects. exhausts cursor</span><br/><span class="hl-3">cursor</span><span class="hl-2">.</span><span class="hl-7">all</span><span class="hl-2">();</span>
</code></pre>

<a href="#using-jsonschema-operator" id="using-jsonschema-operator" style="color: inherit; text-decoration: none;">
  <h2>Using $jsonSchema operator</h2>
</a>
<p>To use the <code>$jsonSchema</code> operator, you must register your own <code>JsonSchemaValidator</code> in the options.
No default implementation is provided out of the box so users can use a library with their preferred schema format.</p>
<p>The example below uses <a href="https://www.npmjs.com/package/ajv">Ajv</a> to implement schema validation.</p>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">RawObject</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo/types&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">JsonSchemaValidator</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo/core&quot;</span><br/><span class="hl-1">import</span><span class="hl-2"> </span><span class="hl-3">Ajv</span><span class="hl-2">, { </span><span class="hl-3">Schema</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;ajv&quot;</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-7">jsonSchemaValidator</span><span class="hl-2">: </span><span class="hl-9">JsonSchemaValidator</span><span class="hl-2"> = (</span><span class="hl-3">s</span><span class="hl-2">: </span><span class="hl-9">RawObject</span><span class="hl-2">) </span><span class="hl-5">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">ajv</span><span class="hl-2"> = </span><span class="hl-5">new</span><span class="hl-2"> </span><span class="hl-7">Ajv</span><span class="hl-2">();</span><br/><span class="hl-2">  </span><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">v</span><span class="hl-2"> = </span><span class="hl-3">ajv</span><span class="hl-2">.</span><span class="hl-7">compile</span><span class="hl-2">(</span><span class="hl-3">s</span><span class="hl-2"> </span><span class="hl-1">as</span><span class="hl-2"> </span><span class="hl-9">Schema</span><span class="hl-2">);</span><br/><span class="hl-2">  </span><span class="hl-1">return</span><span class="hl-2"> (</span><span class="hl-3">o</span><span class="hl-2">: </span><span class="hl-9">RawObject</span><span class="hl-2">) </span><span class="hl-5">=&gt;</span><span class="hl-2"> (</span><span class="hl-7">v</span><span class="hl-2">(</span><span class="hl-3">o</span><span class="hl-2">) ? </span><span class="hl-5">true</span><span class="hl-2"> : </span><span class="hl-5">false</span><span class="hl-2">);</span><br/><span class="hl-2">};</span><br/><br/><span class="hl-5">const</span><span class="hl-2"> </span><span class="hl-6">schema</span><span class="hl-2"> = {</span><br/><span class="hl-2">  </span><span class="hl-3">type:</span><span class="hl-2"> </span><span class="hl-4">&quot;object&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">  </span><span class="hl-3">required:</span><span class="hl-2"> [</span><span class="hl-4">&quot;item&quot;</span><span class="hl-2">, </span><span class="hl-4">&quot;qty&quot;</span><span class="hl-2">, </span><span class="hl-4">&quot;instock&quot;</span><span class="hl-2">],</span><br/><span class="hl-2">  </span><span class="hl-3">properties:</span><span class="hl-2"> {</span><br/><span class="hl-2">    </span><span class="hl-3">item:</span><span class="hl-2"> { </span><span class="hl-3">type:</span><span class="hl-2"> </span><span class="hl-4">&quot;string&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">    </span><span class="hl-3">qty:</span><span class="hl-2"> { </span><span class="hl-3">type:</span><span class="hl-2"> </span><span class="hl-4">&quot;integer&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">    </span><span class="hl-3">size:</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">type:</span><span class="hl-2"> </span><span class="hl-4">&quot;object&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">      </span><span class="hl-3">required:</span><span class="hl-2"> [</span><span class="hl-4">&quot;uom&quot;</span><span class="hl-2">],</span><br/><span class="hl-2">      </span><span class="hl-3">properties:</span><span class="hl-2"> {</span><br/><span class="hl-2">        </span><span class="hl-3">uom:</span><span class="hl-2"> { </span><span class="hl-3">type:</span><span class="hl-2"> </span><span class="hl-4">&quot;string&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">        </span><span class="hl-3">h:</span><span class="hl-2"> { </span><span class="hl-3">type:</span><span class="hl-2"> </span><span class="hl-4">&quot;number&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">        </span><span class="hl-3">w:</span><span class="hl-2"> { </span><span class="hl-3">type:</span><span class="hl-2"> </span><span class="hl-4">&quot;number&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">      },</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    </span><span class="hl-3">instock:</span><span class="hl-2"> { </span><span class="hl-3">type:</span><span class="hl-2"> </span><span class="hl-4">&quot;boolean&quot;</span><span class="hl-2"> },</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">};</span><br/><br/><span class="hl-0">// queries documents using schema validation</span><br/><span class="hl-7">find</span><span class="hl-2">(</span><span class="hl-3">docs</span><span class="hl-2">, { </span><span class="hl-3">$jsonSchema:</span><span class="hl-2"> </span><span class="hl-3">schema</span><span class="hl-2"> }, {}, { </span><span class="hl-3">jsonSchemaValidator</span><span class="hl-2"> }).</span><span class="hl-7">all</span><span class="hl-2">();</span>
</code></pre>
<p><strong>Note:</strong> An error is thrown when the <code>$jsonSchema</code> operator is used without a the <code>jsonSchemaValidator</code> configured.</p>

<a href="#aggregation-pipeline" id="aggregation-pipeline" style="color: inherit; text-decoration: none;">
  <h2>Aggregation Pipeline</h2>
</a>
<pre><code class="language-js"><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">Aggregator</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo/aggregator&quot;</span><span class="hl-2">;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">useOperators</span><span class="hl-2">, </span><span class="hl-3">OperatorType</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo/core&quot;</span><span class="hl-2">;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">$match</span><span class="hl-2">, </span><span class="hl-3">$group</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo/operators/pipeline&quot;</span><span class="hl-2">;</span><br/><span class="hl-1">import</span><span class="hl-2"> { </span><span class="hl-3">$min</span><span class="hl-2"> } </span><span class="hl-1">from</span><span class="hl-2"> </span><span class="hl-4">&quot;mingo/operators/accumulator&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-0">// ensure the required operators are preloaded prior to using them.</span><br/><span class="hl-7">useOperators</span><span class="hl-2">(</span><span class="hl-3">OperatorType</span><span class="hl-2">.</span><span class="hl-6">PIPELINE</span><span class="hl-2">, { </span><span class="hl-3">$match</span><span class="hl-2">, </span><span class="hl-3">$group</span><span class="hl-2"> });</span><br/><span class="hl-7">useOperators</span><span class="hl-2">(</span><span class="hl-3">OperatorType</span><span class="hl-2">.</span><span class="hl-6">ACCUMULATOR</span><span class="hl-2">, { </span><span class="hl-3">$min</span><span class="hl-2"> });</span><br/><br/><span class="hl-5">let</span><span class="hl-2"> </span><span class="hl-3">agg</span><span class="hl-2"> = </span><span class="hl-5">new</span><span class="hl-2"> </span><span class="hl-7">Aggregator</span><span class="hl-2">([</span><br/><span class="hl-2">  { </span><span class="hl-3">$match:</span><span class="hl-2"> { </span><span class="hl-3">type:</span><span class="hl-2"> </span><span class="hl-4">&quot;homework&quot;</span><span class="hl-2"> } },</span><br/><span class="hl-2">  { </span><span class="hl-3">$group:</span><span class="hl-2"> { </span><span class="hl-3">_id:</span><span class="hl-2"> </span><span class="hl-4">&quot;$student_id&quot;</span><span class="hl-2">, </span><span class="hl-3">score:</span><span class="hl-2"> { </span><span class="hl-3">$min:</span><span class="hl-2"> </span><span class="hl-4">&quot;$score&quot;</span><span class="hl-2"> } } },</span><br/><span class="hl-2">  { </span><span class="hl-3">$sort:</span><span class="hl-2"> { </span><span class="hl-3">_id:</span><span class="hl-2"> </span><span class="hl-8">1</span><span class="hl-2">, </span><span class="hl-3">score:</span><span class="hl-2"> </span><span class="hl-8">1</span><span class="hl-2"> } },</span><br/><span class="hl-2">]);</span><br/><br/><span class="hl-0">// return an iterator for streaming results</span><br/><span class="hl-5">let</span><span class="hl-2"> </span><span class="hl-3">stream</span><span class="hl-2"> = </span><span class="hl-3">agg</span><span class="hl-2">.</span><span class="hl-7">stream</span><span class="hl-2">(</span><span class="hl-3">collection</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// return all results. same as `stream.all()`</span><br/><span class="hl-5">let</span><span class="hl-2"> </span><span class="hl-3">result</span><span class="hl-2"> = </span><span class="hl-3">agg</span><span class="hl-2">.</span><span class="hl-7">run</span><span class="hl-2">(</span><span class="hl-3">collection</span><span class="hl-2">);</span>
</code></pre>

<a href="#options" id="options" style="color: inherit; text-decoration: none;">
  <h2>Options</h2>
</a>
<p>Query and aggregation operations can be configured with options to enabled different features or customize how documents are processed. Some options are only relevant to specific operators and need not be specified if not required.</p>
<pre><code class="language-js"><span class="hl-5">interface</span><span class="hl-2"> </span><span class="hl-9">Options</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-0">/** The key that is used to lookup the ID value of a document. </span><span class="hl-5">@default</span><span class="hl-0"> </span><span class="hl-3">&quot;</span><span class="hl-3">_id</span><span class="hl-3">&quot;</span><span class="hl-0"> */</span><br/><span class="hl-2">  </span><span class="hl-5">readonly</span><span class="hl-2"> </span><span class="hl-3">idKey</span><span class="hl-2">?: </span><span class="hl-9">string</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-0">/** The collation specification for string sorting operations. */</span><br/><span class="hl-2">  </span><span class="hl-5">readonly</span><span class="hl-2"> </span><span class="hl-3">collation</span><span class="hl-2">?: </span><span class="hl-9">CollationSpec</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-0">/** Determines how to treat inputs and outputs. </span><span class="hl-5">@default</span><span class="hl-0"> </span><span class="hl-3">ProcessingMode.CLONE_OFF</span><span class="hl-0"> */</span><br/><span class="hl-2">  </span><span class="hl-5">readonly</span><span class="hl-2"> </span><span class="hl-3">processingMode</span><span class="hl-2">?: </span><span class="hl-9">ProcessingMode</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * Enforces strict MongoDB compatibilty. See readme for differences. </span><span class="hl-5">@default</span><span class="hl-0"> </span><span class="hl-3">true.</span><br/><span class="hl-0">   * When disabled, the $elemMatch projection operator returns all matching nested documents instead of only the first.</span><br/><span class="hl-0">   */</span><br/><span class="hl-2">  </span><span class="hl-5">readonly</span><span class="hl-2"> </span><span class="hl-3">useStrictMode</span><span class="hl-2">?: </span><span class="hl-9">boolean</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-0">/**</span><br/><span class="hl-0">   * Enables or disables custom script execution.</span><br/><span class="hl-0">   * When disabled, you cannot use operations that execute custom code, such as the $where, $accumulator, and $function.</span><br/><span class="hl-0">   * </span><span class="hl-5">@default</span><span class="hl-0"> </span><span class="hl-3">true</span><br/><span class="hl-0">   */</span><br/><span class="hl-2">  </span><span class="hl-5">readonly</span><span class="hl-2"> </span><span class="hl-3">scriptEnabled</span><span class="hl-2">?: </span><span class="hl-9">boolean</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-0">/** Hash function to replace the somewhat weaker default implementation. */</span><br/><span class="hl-2">  </span><span class="hl-5">readonly</span><span class="hl-2"> </span><span class="hl-3">hashFunction</span><span class="hl-2">?: </span><span class="hl-9">HashFunction</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-0">/** Function to resolve strings to arrays for use with operators that reference other collections such as; `$lookup`, `$out` and `$merge`. */</span><br/><span class="hl-2">  </span><span class="hl-5">readonly</span><span class="hl-2"> </span><span class="hl-3">collectionResolver</span><span class="hl-2">?: </span><span class="hl-9">CollectionResolver</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-0">/** JSON schema validator to use with the &#39;$jsonSchema&#39; operator. This is required in order to use the operator. */</span><br/><span class="hl-2">  </span><span class="hl-5">readonly</span><span class="hl-2"> </span><span class="hl-3">jsonSchemaValidator</span><span class="hl-2">?: </span><span class="hl-9">JsonSchemaValidator</span><span class="hl-2">;</span><br/><span class="hl-2">}</span>
</code></pre>

<a href="#adding-custom-operators" id="adding-custom-operators" style="color: inherit; text-decoration: none;">
  <h2>Adding Custom Operators</h2>
</a>
<p>Custom operators can be added with the <a href="http://kofrasa.net/mingo/modules/core.html#useOperators">useOperators(type, operatorMap)</a> where
<code>type</code> is the kind of operators to add, and <code>operatorMap</code> is mapping of function names beginning with <code>$</code> to their implementations for the specific operator type.</p>
<p>Once an operator has been registered the function referenced cannot be replaced. This ensures that behaviour of <code>mingo</code> remain consistent at runtime.</p>
<p>Each operator type function has a different signature and must be registered correctly otherwise the result will be unexpected.</p>
<ul>
<li><a href="http://kofrasa.net/mingo/modules/core.html#AccumulatorOperator">AccumulatorOperator</a></li>
<li><a href="http://kofrasa.net/mingo/modules/core.html#ExpressionOperator">ExpressionOperator</a></li>
<li><a href="http://kofrasa.net/mingo/modules/core.html#ProjectionOperator">ProjectionOperator</a></li>
<li><a href="http://kofrasa.net/mingo/modules/core.html#PipelineOperator">PipelineOperator</a></li>
<li><a href="http://kofrasa.net/mingo/modules/core.html#WindowOperator">WindowOperator</a></li>
<li><a href="http://kofrasa.net/mingo/modules/core.html#QueryOperator">QueryOperator</a></li>
</ul>
<p>Pre-loaded operators defined <a href="https://github.com/kofrasa/mingo/blob/master/src/init/basic.ts">here</a> cannot be overridden. These include;</p>
<ul>
<li>All <a href="http://kofrasa.net/mingo/modules/operators_query.html">query</a> operators.</li>
<li>All <a href="http://kofrasa.net/mingo/modules/operators_projection.html">projection</a> operators.</li>
<li>Expression operators for <a href="http://kofrasa.net/mingo/modules/operators_expression_boolean.html">boolean</a> and <a href="http://kofrasa.net/mingo/modules/operators_expression_comparison.html">comparison</a>.</li>
<li>Pipeline <a href="http://kofrasa.net/mingo/modules/operators_pipeline.html">operators</a>; <code>$project</code>, <code>$skip</code>, <code>$limit</code>, and <code>$sort</code>.</li>
</ul>

<a href="#differences-from-mongodb" id="differences-from-mongodb" style="color: inherit; text-decoration: none;">
  <h2>Differences from MongoDB</h2>
</a>
<ol>
<li>There is no concept of a collection. Input data is either an array of objects or a generator function to support streaming.</li>
<li>Does not support server specific operators. E.g. <code>$collStat</code>, <code>$planCacheStats</code>, <code>$listSessions</code>.</li>
<li>Does not support GeoJSON query operators.</li>
<li>Does not support query operators; <code>$comment</code>, <code>$meta</code>, <code>$text</code>.</li>
<li>Does not support aggregation expression operators; <code>$toObjectId</code>, <code>$binarySize</code>, <code>bsonSize</code>.</li>
<li>Agregation pipeline operator <code>$merge</code> enforces unique constraint on the lookup field at runtime.</li>
<li>Custom function evaluation operators; <code>$where</code>, <code>$function</code>, and <code>$accumulator</code>, do not accept strings as the function body.</li>
<li>Custom function evaluation operators are enabled by default. They can be disabled with the <code>scriptEnabled</code> option.</li>
<li>Custom function evaluation operator <a href="https://docs.mongodb.com/manual/reference/operator/aggregation/accumulator/">$accumulator</a> does not support the <code>merge</code> option.</li>
<li>The <code>$jsonSchema</code> operator requires the user to register their own validator using the <code>jsonSchemaValidator</code> option.</li>
</ol>

<a href="#benefits" id="benefits" style="color: inherit; text-decoration: none;">
  <h2>Benefits</h2>
</a>
<ul>
<li>Better alternative to writing custom code for transforming collection of objects</li>
<li>Quick validation of MongoDB queries without the need for a database</li>
<li>MongoDB query language is among the best in the market and is well documented</li>
</ul>

<a href="#contributing" id="contributing" style="color: inherit; text-decoration: none;">
  <h2>Contributing</h2>
</a>
<ul>
<li>Squash changes into one commit</li>
<li>Run <code>npm test</code> to build and execute unit tests</li>
<li>Submit pull request</li>
</ul>
<p>To validate correct behaviour and semantics of operators, you may also test against <a href="https://mongoplayground.net/">mongoplayground.net</a>.</p>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h2>License</h2>
</a>
<p>MIT</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/aggregator.html">aggregator</a></li><li class=" tsd-kind-module"><a href="modules/core.html">core</a></li><li class=" tsd-kind-module"><a href="modules/cursor.html">cursor</a></li><li class=" tsd-kind-module"><a href="modules/index.html">index</a></li><li class=" tsd-kind-module"><a href="modules/lazy.html">lazy</a></li><li class=" tsd-kind-module"><a href="modules/operators__predicates.html">operators/_<wbr/>predicates</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator.html">operators/accumulator</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator__internal.html">operators/accumulator/_<wbr/>internal</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_addToSet.html">operators/accumulator/add<wbr/>To<wbr/>Set</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_avg.html">operators/accumulator/avg</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_count.html">operators/accumulator/count</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_covariancePop.html">operators/accumulator/covariance<wbr/>Pop</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_covarianceSamp.html">operators/accumulator/covariance<wbr/>Samp</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_first.html">operators/accumulator/first</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_last.html">operators/accumulator/last</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_max.html">operators/accumulator/max</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_mergeObjects.html">operators/accumulator/merge<wbr/>Objects</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_min.html">operators/accumulator/min</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_push.html">operators/accumulator/push</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_stdDevPop.html">operators/accumulator/std<wbr/>Dev<wbr/>Pop</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_stdDevSamp.html">operators/accumulator/std<wbr/>Dev<wbr/>Samp</a></li><li class=" tsd-kind-module"><a href="modules/operators_accumulator_sum.html">operators/accumulator/sum</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression.html">operators/expression</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic.html">operators/expression/arithmetic</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic__internal.html">operators/expression/arithmetic/_<wbr/>internal</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_abs.html">operators/expression/arithmetic/abs</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_add.html">operators/expression/arithmetic/add</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_ceil.html">operators/expression/arithmetic/ceil</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_divide.html">operators/expression/arithmetic/divide</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_exp.html">operators/expression/arithmetic/exp</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_floor.html">operators/expression/arithmetic/floor</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_ln.html">operators/expression/arithmetic/ln</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_log.html">operators/expression/arithmetic/log</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_log10.html">operators/expression/arithmetic/log10</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_mod.html">operators/expression/arithmetic/mod</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_multiply.html">operators/expression/arithmetic/multiply</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_pow.html">operators/expression/arithmetic/pow</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_round.html">operators/expression/arithmetic/round</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_sqrt.html">operators/expression/arithmetic/sqrt</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_subtract.html">operators/expression/arithmetic/subtract</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_arithmetic_trunc.html">operators/expression/arithmetic/trunc</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array.html">operators/expression/array</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_arrayElemAt.html">operators/expression/array/array<wbr/>Elem<wbr/>At</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_arrayToObject.html">operators/expression/array/array<wbr/>To<wbr/>Object</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_concatArrays.html">operators/expression/array/concat<wbr/>Arrays</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_filter.html">operators/expression/array/filter</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_first.html">operators/expression/array/first</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_in.html">operators/expression/array/in</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_indexOfArray.html">operators/expression/array/index<wbr/>Of<wbr/>Array</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_isArray.html">operators/expression/array/is<wbr/>Array</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_last.html">operators/expression/array/last</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_map.html">operators/expression/array/map</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_nin.html">operators/expression/array/nin</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_range.html">operators/expression/array/range</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_reduce.html">operators/expression/array/reduce</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_reverseArray.html">operators/expression/array/reverse<wbr/>Array</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_size.html">operators/expression/array/size</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_slice.html">operators/expression/array/slice</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_array_zip.html">operators/expression/array/zip</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_boolean.html">operators/expression/boolean</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_boolean_and.html">operators/expression/boolean/and</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_boolean_not.html">operators/expression/boolean/not</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_boolean_or.html">operators/expression/boolean/or</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_comparison.html">operators/expression/comparison</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_comparison_cmp.html">operators/expression/comparison/cmp</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_comparison_eq.html">operators/expression/comparison/eq</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_comparison_gt.html">operators/expression/comparison/gt</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_comparison_gte.html">operators/expression/comparison/gte</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_comparison_lt.html">operators/expression/comparison/lt</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_comparison_lte.html">operators/expression/comparison/lte</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_comparison_ne.html">operators/expression/comparison/ne</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_conditional.html">operators/expression/conditional</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_conditional_cond.html">operators/expression/conditional/cond</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_conditional_ifNull.html">operators/expression/conditional/if<wbr/>Null</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_conditional_switch.html">operators/expression/conditional/switch</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_custom.html">operators/expression/custom</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_custom_accumulator.html">operators/expression/custom/accumulator</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_custom_function.html">operators/expression/custom/function</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date.html">operators/expression/date</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date__internal.html">operators/expression/date/_<wbr/>internal</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_dateAdd.html">operators/expression/date/date<wbr/>Add</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_dateDiff.html">operators/expression/date/date<wbr/>Diff</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_dateFromParts.html">operators/expression/date/date<wbr/>From<wbr/>Parts</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_dateFromString.html">operators/expression/date/date<wbr/>From<wbr/>String</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_dateSubtract.html">operators/expression/date/date<wbr/>Subtract</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_dateToParts.html">operators/expression/date/date<wbr/>To<wbr/>Parts</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_dateToString.html">operators/expression/date/date<wbr/>To<wbr/>String</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_dayOfMonth.html">operators/expression/date/day<wbr/>Of<wbr/>Month</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_dayOfWeek.html">operators/expression/date/day<wbr/>Of<wbr/>Week</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_dayOfYear.html">operators/expression/date/day<wbr/>Of<wbr/>Year</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_hour.html">operators/expression/date/hour</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_isoDayOfWeek.html">operators/expression/date/iso<wbr/>Day<wbr/>Of<wbr/>Week</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_isoWeek.html">operators/expression/date/iso<wbr/>Week</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_isoWeekYear.html">operators/expression/date/iso<wbr/>Week<wbr/>Year</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_millisecond.html">operators/expression/date/millisecond</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_minute.html">operators/expression/date/minute</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_month.html">operators/expression/date/month</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_second.html">operators/expression/date/second</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_week.html">operators/expression/date/week</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_date_year.html">operators/expression/date/year</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_literal.html">operators/expression/literal</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_misc.html">operators/expression/misc</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_misc_getField.html">operators/expression/misc/get<wbr/>Field</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_misc_rand.html">operators/expression/misc/rand</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_misc_sampleRate.html">operators/expression/misc/sample<wbr/>Rate</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_object.html">operators/expression/object</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_object_mergeObjects.html">operators/expression/object/merge<wbr/>Objects</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_object_objectToArray.html">operators/expression/object/object<wbr/>To<wbr/>Array</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_object_setField.html">operators/expression/object/set<wbr/>Field</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_object_unsetField.html">operators/expression/object/unset<wbr/>Field</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_set.html">operators/expression/set</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_set_allElementsTrue.html">operators/expression/set/all<wbr/>Elements<wbr/>True</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_set_anyElementTrue.html">operators/expression/set/any<wbr/>Element<wbr/>True</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_set_setDifference.html">operators/expression/set/set<wbr/>Difference</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_set_setEquals.html">operators/expression/set/set<wbr/>Equals</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_set_setIntersection.html">operators/expression/set/set<wbr/>Intersection</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_set_setIsSubset.html">operators/expression/set/set<wbr/>Is<wbr/>Subset</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_set_setUnion.html">operators/expression/set/set<wbr/>Union</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string.html">operators/expression/string</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string__internal.html">operators/expression/string/_<wbr/>internal</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_concat.html">operators/expression/string/concat</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_indexOfBytes.html">operators/expression/string/index<wbr/>Of<wbr/>Bytes</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_ltrim.html">operators/expression/string/ltrim</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_regexFind.html">operators/expression/string/regex<wbr/>Find</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_regexFindAll.html">operators/expression/string/regex<wbr/>Find<wbr/>All</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_regexMatch.html">operators/expression/string/regex<wbr/>Match</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_replaceAll.html">operators/expression/string/replace<wbr/>All</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_replaceOne.html">operators/expression/string/replace<wbr/>One</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_rtrim.html">operators/expression/string/rtrim</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_split.html">operators/expression/string/split</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_strLenBytes.html">operators/expression/string/str<wbr/>Len<wbr/>Bytes</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_strLenCP.html">operators/expression/string/str<wbr/>LenCP</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_strcasecmp.html">operators/expression/string/strcasecmp</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_substr.html">operators/expression/string/substr</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_substrBytes.html">operators/expression/string/substr<wbr/>Bytes</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_substrCP.html">operators/expression/string/substrCP</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_toLower.html">operators/expression/string/to<wbr/>Lower</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_toUpper.html">operators/expression/string/to<wbr/>Upper</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_string_trim.html">operators/expression/string/trim</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry.html">operators/expression/trignometry</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry__internal.html">operators/expression/trignometry/_<wbr/>internal</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry_acos.html">operators/expression/trignometry/acos</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry_acosh.html">operators/expression/trignometry/acosh</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry_asin.html">operators/expression/trignometry/asin</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry_asinh.html">operators/expression/trignometry/asinh</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry_atan.html">operators/expression/trignometry/atan</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry_atan2.html">operators/expression/trignometry/atan2</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry_atanh.html">operators/expression/trignometry/atanh</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry_cos.html">operators/expression/trignometry/cos</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry_degreesToRadians.html">operators/expression/trignometry/degrees<wbr/>To<wbr/>Radians</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry_radiansToDegrees.html">operators/expression/trignometry/radians<wbr/>To<wbr/>Degrees</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry_sin.html">operators/expression/trignometry/sin</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_trignometry_tan.html">operators/expression/trignometry/tan</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_type.html">operators/expression/type</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_type__internal.html">operators/expression/type/_<wbr/>internal</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_type_convert.html">operators/expression/type/convert</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_type_isNumber.html">operators/expression/type/is<wbr/>Number</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_type_toBool.html">operators/expression/type/to<wbr/>Bool</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_type_toDate.html">operators/expression/type/to<wbr/>Date</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_type_toDecimal.html">operators/expression/type/to<wbr/>Decimal</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_type_toDouble.html">operators/expression/type/to<wbr/>Double</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_type_toInt.html">operators/expression/type/to<wbr/>Int</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_type_toLong.html">operators/expression/type/to<wbr/>Long</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_type_toString.html">operators/expression/type/to<wbr/>String</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_type_type.html">operators/expression/type/type</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_variable.html">operators/expression/variable</a></li><li class=" tsd-kind-module"><a href="modules/operators_expression_variable_let.html">operators/expression/variable/let</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline.html">operators/pipeline</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline__internal.html">operators/pipeline/_<wbr/>internal</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_addFields.html">operators/pipeline/add<wbr/>Fields</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_bucket.html">operators/pipeline/bucket</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_bucketAuto.html">operators/pipeline/bucket<wbr/>Auto</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_count.html">operators/pipeline/count</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_facet.html">operators/pipeline/facet</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_group.html">operators/pipeline/group</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_limit.html">operators/pipeline/limit</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_lookup.html">operators/pipeline/lookup</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_match.html">operators/pipeline/match</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_merge.html">operators/pipeline/merge</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_out.html">operators/pipeline/out</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_project.html">operators/pipeline/project</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_redact.html">operators/pipeline/redact</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_replaceRoot.html">operators/pipeline/replace<wbr/>Root</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_replaceWith.html">operators/pipeline/replace<wbr/>With</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_sample.html">operators/pipeline/sample</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_set.html">operators/pipeline/set</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_setWindowFields.html">operators/pipeline/set<wbr/>Window<wbr/>Fields</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_skip.html">operators/pipeline/skip</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_sort.html">operators/pipeline/sort</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_sortByCount.html">operators/pipeline/sort<wbr/>By<wbr/>Count</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_unionWith.html">operators/pipeline/union<wbr/>With</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_unset.html">operators/pipeline/unset</a></li><li class=" tsd-kind-module"><a href="modules/operators_pipeline_unwind.html">operators/pipeline/unwind</a></li><li class=" tsd-kind-module"><a href="modules/operators_projection.html">operators/projection</a></li><li class=" tsd-kind-module"><a href="modules/operators_projection_elemMatch.html">operators/projection/elem<wbr/>Match</a></li><li class=" tsd-kind-module"><a href="modules/operators_projection_slice.html">operators/projection/slice</a></li><li class=" tsd-kind-module"><a href="modules/operators_query.html">operators/query</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_array.html">operators/query/array</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_array_all.html">operators/query/array/all</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_array_elemMatch.html">operators/query/array/elem<wbr/>Match</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_array_size.html">operators/query/array/size</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_bitwise.html">operators/query/bitwise</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_bitwise__internal.html">operators/query/bitwise/_<wbr/>internal</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_bitwise_bitsAllClear.html">operators/query/bitwise/bits<wbr/>All<wbr/>Clear</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_bitwise_bitsAllSet.html">operators/query/bitwise/bits<wbr/>All<wbr/>Set</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_bitwise_bitsAnyClear.html">operators/query/bitwise/bits<wbr/>Any<wbr/>Clear</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_bitwise_bitsAnySet.html">operators/query/bitwise/bits<wbr/>Any<wbr/>Set</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_comparison.html">operators/query/comparison</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_comparison_eq.html">operators/query/comparison/eq</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_comparison_gt.html">operators/query/comparison/gt</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_comparison_gte.html">operators/query/comparison/gte</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_comparison_in.html">operators/query/comparison/in</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_comparison_lt.html">operators/query/comparison/lt</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_comparison_lte.html">operators/query/comparison/lte</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_comparison_ne.html">operators/query/comparison/ne</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_comparison_nin.html">operators/query/comparison/nin</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_element.html">operators/query/element</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_element_exists.html">operators/query/element/exists</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_element_type.html">operators/query/element/type</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_evaluation.html">operators/query/evaluation</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_evaluation_expr.html">operators/query/evaluation/expr</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_evaluation_jsonSchema.html">operators/query/evaluation/json<wbr/>Schema</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_evaluation_mod.html">operators/query/evaluation/mod</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_evaluation_regex.html">operators/query/evaluation/regex</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_evaluation_where.html">operators/query/evaluation/where</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_logical.html">operators/query/logical</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_logical_and.html">operators/query/logical/and</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_logical_nor.html">operators/query/logical/nor</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_logical_not.html">operators/query/logical/not</a></li><li class=" tsd-kind-module"><a href="modules/operators_query_logical_or.html">operators/query/logical/or</a></li><li class=" tsd-kind-module"><a href="modules/operators_window.html">operators/window</a></li><li class=" tsd-kind-module"><a href="modules/operators_window__internal.html">operators/window/_<wbr/>internal</a></li><li class=" tsd-kind-module"><a href="modules/operators_window_denseRank.html">operators/window/dense<wbr/>Rank</a></li><li class=" tsd-kind-module"><a href="modules/operators_window_derivative.html">operators/window/derivative</a></li><li class=" tsd-kind-module"><a href="modules/operators_window_documentNumber.html">operators/window/document<wbr/>Number</a></li><li class=" tsd-kind-module"><a href="modules/operators_window_expMovingAvg.html">operators/window/exp<wbr/>Moving<wbr/>Avg</a></li><li class=" tsd-kind-module"><a href="modules/operators_window_integral.html">operators/window/integral</a></li><li class=" tsd-kind-module"><a href="modules/operators_window_rank.html">operators/window/rank</a></li><li class=" tsd-kind-module"><a href="modules/operators_window_shift.html">operators/window/shift</a></li><li class=" tsd-kind-module"><a href="modules/query.html">query</a></li><li class=" tsd-kind-module"><a href="modules/types.html">types</a></li><li class=" tsd-kind-module"><a href="modules/util.html">util</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li><li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>